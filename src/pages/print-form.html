<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; font-src 'self'; img-src 'self' data:; connect-src 'self';">
    <title>Print Form - Noor & Sons Tailors</title>
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <style>
        /* Print Form Styles - Moved from print-form.css */
        /* Print-specific styles for customer detail forms */
        .details-container {
            width: 95%;
            max-width: 1200px;
            margin: 20px auto;
            padding: 20px;
            background-color: #fff;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
        }

        .header-section {
            text-align: center;
            margin-bottom: 20px;
        }

        .logo {
            max-height: 100px;
            margin-bottom: 15px;
        }

        .button-group {
            text-align: end;
            margin-bottom: 15px;
        }

        .print-button,
        .back-button {
            display: inline-block;
            padding: 8px 16px;
            font-size: 14px;
            font-weight: 400;
            line-height: 1.5;
            text-align: center;
            text-decoration: none;
            vertical-align: middle;
            cursor: pointer;
            border: 1px solid transparent;
            border-radius: 4px;
            transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
        }

        .print-button {
            color: #fff;
            background-color: #198754;
            border-color: #198754;
            margin-right: 10px;
        }

        .print-button:hover {
            color: #fff;
            background-color: #157347;
            border-color: #146c43;
        }

        .back-button {
            color: #000;
            background-color: #6c757d;
            border-color: #6c757d;
        }

        .back-button:hover {
            color: #000;
            background-color: #5c636a;
            border-color: #565e64;
        }

        .customer-info,
        .measurements-section,
        .signature-section {
            margin-bottom: 20px;
        }

        .info-row,
        .measurement-row {
            display: flex;
            flex-wrap: wrap;
            margin-left: -15px;
            margin-right: -15px;
        }

        .info-item,
        .measurement-item {
            flex: 0 0 auto;
            width: 50%;
            padding-left: 15px;
            padding-right: 15px;
            margin-bottom: 15px;
        }

        .measurement-item {
            width: 25%;
        }

        .detail-item {
            margin-bottom: 10px;
        }

        .detail-label {
            font-weight: bold;
            display: inline-block;
            margin-bottom: 5px;
        }

        .section-divider {
            margin-top: 20px;
            margin-bottom: 20px;
            border: 0;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
        }

        .measurements-title {
            margin-bottom: 15px;
        }

        .rtl-text {
            direction: rtl;
            text-align: right;
        }

        .signature-section {
            margin-top: 30px;
        }

        .signature-line {
            margin-bottom: 40px;
        }

        /* Print Form Layout Styles */
        .print-form {
            display: none;
        }

        .print-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            padding: 10px 0 15px 0;
            margin-bottom: 20px;
            border-bottom: 2px solid #000;
        }

        .logo-left {
            height: 80px;
            width: auto;
            flex-shrink: 0;
            object-fit: contain;
        }

        .logo-right {
            height: 70px;
            width: auto;
            object-fit: contain;
        }

        .logo-right-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            flex-shrink: 0;
        }

        .logo-right-bottom {
            height: 30px;
            width: auto;
            object-fit: contain;
        }

        .shop-info {
            text-align: center;
            flex: 1;
            margin: 0 20px;
        }

        .shop-info h2 {
            margin: 0;
            font-size: 22px;
            font-weight: bold;
            color: #000;
            letter-spacing: 1px;
        }

        .shop-info p {
            margin: 8px 0 0;
            font-size: 16px;
            font-style: italic;
            color: #333;
        }

        .customer-info,
        .measurements-section {
            margin-bottom: 25px;
        }

        .info-row,
        .measurement-row {
            display: flex;
            margin-bottom: 15px;
            align-items: flex-end;
        }

        .info-item,
        .measurement-item {
            display: flex;
            align-items: baseline;
            margin-right: 30px;
        }

        .info-item.grid-span-3 {
            flex: 1;
            margin-right: 0;
        }

        .info-label,
        .measurement-label {
            font-weight: normal;
            font-size: 12px;
            margin: 0;
            margin-right: 8px;
            white-space: nowrap;
            color: #333;
        }

        .info-value,
        .measurement-value {
            border-bottom: 1px solid #999;
            min-height: 20px;
            padding: 2px 0;
            font-size: 12px;
            color: #000;
            width: fit-content;
            max-width: 120px;
            min-width: 80px;
        }

        .section-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 15px;
            padding-bottom: 5px;
            border-bottom: 1px solid #ccc;
            color: #000;
        }

        /* Qameez Two-Column Layout Styles */
        .qameez-two-column-grid {
            display: flex;
            align-items: flex-start;
            margin-bottom: 20px;
            width: 100%;
            justify-content: flex-start;
        }

        .qameez-column-1 {
            display: flex;
            flex-direction: column;
            gap: 8px;
            width: 45%;
            margin-right: 30px;
        }

        .qameez-column-2 {
            display: flex;
            flex-direction: column;
            gap: 4px;
            width: 25%;
            margin-left: auto;
        }

        .qameez-measure-item {
            display: flex;
            align-items: baseline;
            gap: 8px;
            min-height: 20px;
            padding: 2px 0;
        }

        .qameez-label {
            font-weight: normal;
            font-size: 12px;
            color: #333;
            min-width: 80px;
            white-space: nowrap;
        }

        .qameez-value {
            border-bottom: none;
            min-height: 18px;
            font-size: 12px;
            color: #000;
            width: fit-content;
            max-width: 100px;
            min-width: 60px;
            padding: 1px 3px;
        }

        .qameez-style {
            border-bottom: none;
            min-height: 18px;
            font-size: 12px;
            color: #000;
            min-width: 40px;
            padding: 1px 3px;
            margin-left: 5px;
        }

        /* Shalwar Two-Column Layout Styles */
        .shalwar-two-column-grid {
            display: flex;
            align-items: flex-start;
            margin-bottom: 20px;
            width: 100%;
            position: relative;
        }

        .shalwar-column-1,
        .shalwar-column-2 {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .shalwar-column-1 {
            width: 302px;
            margin-left: 0;
        }

        .shalwar-column-2 {
            width: 302px;
            position: absolute;
            right: 0;
            top: 0;
        }

        .shalwar-measure-item {
            display: flex;
            align-items: baseline;
            gap: 8px;
            min-height: 20px;
            padding: 2px 0;
        }

        .shalwar-label {
            font-weight: normal;
            font-size: 12px;
            color: #333;
            min-width: 80px;
            white-space: nowrap;
        }

        .shalwar-value {
            border-bottom: none;
            min-height: 18px;
            font-size: 12px;
            color: #000;
            width: fit-content;
            max-width: 100px;
            min-width: 60px;
            padding: 1px 3px;
        }

        /* Separator line between sections */
        .separator {
            border-top: 1px solid #ccc;
            margin: 20px 0;
        }

        /* Extra demand section */
        .extra-demand {
            margin-top: 20px;
            display: flex;
            align-items: baseline;
            gap: 10px;
        }

        .extra-demand-label {
            font-weight: bold;
            font-size: 14px;
            color: #333;
            min-width: 120px;
        }

        .extra-demand-value {
            border-bottom: 1px solid #999;
            min-height: 20px;
            font-size: 12px;
            color: #000;
            width: fit-content;
            max-width: 200px;
            min-width: 120px;
            padding: 2px 5px;
        }

        /* Measurements grid for shalwar section */
        .measurements-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }

        .measure-item {
            display: flex;
            align-items: baseline;
            gap: 8px;
            min-height: 20px;
            padding: 2px 0;
        }

        .measure-label {
            font-weight: normal;
            font-size: 12px;
            color: #333;
            min-width: 80px;
            white-space: nowrap;
        }

        .measure-value {
            border-bottom: none;
            min-height: 18px;
            font-size: 12px;
            color: #000;
            width: fit-content;
            max-width: 100px;
            min-width: 60px;
            padding: 1px 3px;
        }

        /* Hide hidden sections */
        .hidden {
            display: none !important;
        }

        /* Cutting Section Styles */
        .cutting-section {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            gap: 20px;
            margin: 15px 0;
            padding: 10px;
            border: 1px solid #ccc;
            background-color: #f9f9f9;
        }

        .cutting-item {
            display: flex;
            align-items: baseline;
            gap: 8px;
        }

        .cutting-item label {
            font-weight: bold;
            font-size: 12px;
            color: #333;
            white-space: nowrap;
        }

        .cutting-value {
            border-bottom: 1px solid #999;
            min-height: 18px;
            font-size: 12px;
            color: #000;
            width: fit-content;
            max-width: 80px;
            min-width: 60px;
            padding: 1px 5px;
        }

        .garment-type {
            font-weight: bold;
            font-size: 14px;
            color: #000;
            margin-left: auto;
            padding: 5px 10px;
            border: 1px solid #666;
            background-color: #fff;
        }

        /* Mobile responsive styles */
        @media (max-width: 768px) {

            .info-item,
            .measurement-item {
                width: 100%;
            }
        }

        /* Print styles */
        @media print {
            body {
                background-color: white;
                font-size: 12px;
                color: #000;
                margin: 0;
                padding: 0;
            }

            /* Hide the main app view when printing */
            .no-print {
                display: none !important;
            }

            /* Show the print form when printing */
            .print-form {
                display: block !important;
                width: 421px !important;
                max-width: 421px !important;
                height: 595px !important;
                max-height: 595px !important;
                margin: 0 auto !important;
                padding: 10px !important;
                background: white !important;
                box-shadow: none !important;
                border: none !important;
                font-size: 9px;
                line-height: 1.2;
                overflow: hidden;
                box-sizing: border-box;
            }

            .d-print-block {
                display: block !important;
            }

            .d-none {
                display: none;
            }

            .d-none.d-print-block {
                display: block !important;
            }

            .details-container {
                width: 100%;
                max-width: 100%;
                padding: 8px;
                box-shadow: none;
                margin: 0;
                height: 100%;
                overflow: hidden;
            }

            .header-section {
                text-align: center;
                margin-bottom: 10px;
                padding-top: 11px;
            }

            .logo {
                max-height: 50px;
                max-width: 150px;
            }

            h2 {
                font-size: 14px;
                margin: 5px 0;
            }

            p {
                margin: 3px 0;
                font-size: 8px;
            }

            .print-header {
                display: flex !important;
                justify-content: space-between !important;
                align-items: center !important;
                width: 100% !important;
                padding: 5px 0 8px 0 !important;
                margin-bottom: 10px !important;
                border-bottom: 1px solid #000 !important;
                page-break-after: avoid;
            }

            .logo-left,
            .logo-right {
                height: 45px !important;
                width: auto !important;
                flex-shrink: 0 !important;
                object-fit: contain;
            }

            .logo-right-container {
                display: flex !important;
                flex-direction: column !important;
                align-items: center !important;
                gap: 3px !important;
                flex-shrink: 0 !important;
            }

            .logo-right-bottom {
                height: 20px !important;
                width: auto !important;
                object-fit: contain;
            }

            .shop-info {
                text-align: center !important;
                flex: 1 !important;
                margin: 0 20px !important;
            }

            .shop-info h2 {
                margin: 0 !important;
                font-size: 22px !important;
                font-weight: bold !important;
                color: #000 !important;
                letter-spacing: 1px !important;
            }

            .shop-info p {
                margin: 8px 0 0 !important;
                font-size: 16px !important;
                font-style: italic !important;
                color: #333 !important;
            }

            .customer-info,
            .measurements-section {
                margin-bottom: 20px !important;
                page-break-inside: avoid;
            }

            .info-row,
            .measurement-row {
                display: flex !important;
                flex-wrap: wrap !important;
                margin-bottom: 12px !important;
            }

            .info-item,
            .measurement-item {
                flex: 1 !important;
                min-width: 200px !important;
                margin-right: 15px !important;
                margin-bottom: 8px !important;
            }

            .info-item.grid-span-3 {
                flex: 1 1 100% !important;
                margin-right: 0 !important;
            }

            .info-label,
            .measurement-label {
                font-weight: bold !important;
                font-size: 10px !important;
                margin-bottom: 2px !important;
                display: block !important;
                color: #000 !important;
            }

            .info-value,
            .measurement-value {
                border-bottom: 1px solid #666 !important;
                min-height: 16px !important;
                padding-bottom: 2px !important;
                font-size: 10px !important;
                color: #000 !important;
                width: fit-content !important;
                max-width: 120px !important;
                min-width: 80px !important;
            }

            .section-title {
                font-size: 14px !important;
                font-weight: bold !important;
                margin-bottom: 12px !important;
                padding-bottom: 3px !important;
                border-bottom: 1px solid #666 !important;
                color: #000 !important;
                page-break-after: avoid;
            }

            .page-break-before {
                page-break-before: always;
            }

            .page-break-after {
                page-break-after: always;
            }

            .avoid-break {
                page-break-inside: avoid;
            }

            /* Qameez Two-Column Layout Print Styles */
            .qameez-two-column-grid {
                display: flex !important;
                align-items: flex-start !important;
                margin-bottom: 15px !important;
                width: 100% !important;
                justify-content: flex-start !important;
                page-break-inside: avoid;
            }

            .qameez-column-1 {
                display: flex !important;
                flex-direction: column !important;
                gap: 6px !important;
                width: 45% !important;
                margin-right: 25px !important;
            }

            .qameez-column-2 {
                display: flex !important;
                flex-direction: column !important;
                gap: 4px !important;
                width: 25% !important;
                margin-left: auto !important;
            }

            .qameez-measure-item {
                display: flex !important;
                align-items: baseline !important;
                gap: 6px !important;
                min-height: 16px !important;
                padding: 1px 0 !important;
                margin-bottom: 2px !important;
            }

            .qameez-label {
                font-weight: bold !important;
                font-size: 9px !important;
                color: #000 !important;
                min-width: 70px !important;
                white-space: nowrap !important;
            }

            .qameez-value {
                border-bottom: none !important;
                min-height: 14px !important;
                font-size: 9px !important;
                color: #000 !important;
                width: fit-content !important;
                max-width: 100px !important;
                min-width: 50px !important;
                padding: 1px 2px !important;
            }

            .qameez-style {
                border-bottom: none !important;
                min-height: 14px !important;
                font-size: 9px !important;
                color: #000 !important;
                min-width: 35px !important;
                padding: 1px 2px !important;
                margin-left: 3px !important;
            }

            .separator {
                border-top: 1px solid #666 !important;
                margin: 15px 0 !important;
            }

            .extra-demand {
                margin-top: 15px !important;
                display: flex !important;
                align-items: baseline !important;
                gap: 8px !important;
            }

            .extra-demand-label {
                font-weight: bold !important;
                font-size: 11px !important;
                color: #000 !important;
                min-width: 100px !important;
            }

            .extra-demand-value {
                border-bottom: 1px solid #666 !important;
                min-height: 16px !important;
                font-size: 10px !important;
                color: #000 !important;
                width: fit-content !important;
                max-width: 200px !important;
                min-width: 120px !important;
                padding: 2px 4px !important;
            }

            .hidden {
                display: none !important;
            }

            /* Cutting Section Print Styles */
            .cutting-section {
                display: flex !important;
                flex-wrap: wrap !important;
                align-items: center !important;
                gap: 15px !important;
                margin: 12px 0 !important;
                padding: 8px !important;
                border: 1px solid #666 !important;
                background-color: #f9f9f9 !important;
                page-break-inside: avoid;
            }

            .cutting-item {
                display: flex !important;
                align-items: baseline !important;
                gap: 5px !important;
            }

            .cutting-item label {
                font-weight: bold !important;
                font-size: 10px !important;
                color: #000 !important;
                white-space: nowrap !important;
            }

            .cutting-value {
                border-bottom: 1px solid #666 !important;
                min-height: 14px !important;
                font-size: 10px !important;
                color: #000 !important;
                width: fit-content !important;
                max-width: 80px !important;
                min-width: 50px !important;
                padding: 1px 4px !important;
            }

            .garment-type {
                font-weight: bold !important;
                font-size: 12px !important;
                color: #000 !important;
                margin-left: auto !important;
                padding: 4px 8px !important;
                border: 1px solid #666 !important;
                background-color: #fff !important;
            }

            /* Measurements grid print styles */
            .measurements-grid {
                display: grid !important;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)) !important;
                gap: 15px !important;
                margin-bottom: 15px !important;
            }

            .measure-item {
                display: flex !important;
                align-items: baseline !important;
                gap: 8px !important;
                min-height: 20px !important;
                padding: 2px 0 !important;
            }

            .measure-label {
                font-weight: normal !important;
                font-size: 12px !important;
                color: #333 !important;
                min-width: 80px !important;
                white-space: nowrap !important;
            }

            .measure-value {
                border-bottom: none !important;
                min-height: 18px !important;
                font-size: 12px !important;
                color: #000 !important;
                width: fit-content !important;
                max-width: 100px !important;
                min-width: 60px !important;
                padding: 1px 3px !important;
            }

            /* Shalwar Two-Column Layout Print Styles */
            .shalwar-two-column-grid {
                display: flex !important;
                align-items: flex-start !important;
                margin-bottom: 20px !important;
                width: 100% !important;
                position: relative !important;
            }

            .shalwar-column-1,
            .shalwar-column-2 {
                display: flex !important;
                flex-direction: column !important;
                gap: 8px !important;
            }

            .shalwar-column-1 {
                width: 302px !important;
                margin-left: 0 !important;
            }

            .shalwar-column-2 {
                width: 302px !important;
                position: absolute !important;
                right: 0 !important;
                top: 0 !important;
            }

            .shalwar-measure-item {
                display: flex !important;
                align-items: baseline !important;
                gap: 8px !important;
                min-height: 20px !important;
                padding: 2px 0 !important;
            }

            .shalwar-label {
                font-weight: normal !important;
                font-size: 12px !important;
                color: #333 !important;
                min-width: 80px !important;
                white-space: nowrap !important;
            }

            .shalwar-value {
                border-bottom: none !important;
                min-height: 18px !important;
                font-size: 12px !important;
                color: #000 !important;
                width: fit-content !important;
                max-width: 100px !important;
                min-width: 60px !important;
                padding: 1px 3px !important;
            }

            /* Collar Combined Field */
            .qameez-collar-combined {
                font-weight: bold !important;
                font-size: 10px !important;
                color: #000 !important;
                direction: rtl !important;
                text-align: center !important;
            }

            /* Grouped Options Oval Section Print Styles */
            .qameez-grouped-options {
                margin-top: 15px !important;
                display: flex !important;
                flex-direction: column !important;
                justify-content: center !important;
                align-items: center !important;
                gap: 8px !important;
                padding: 15px 25px !important;
                border: 2px solid #000 !important;
                border-radius: 50% !important;
                width: 120px !important;
                height: 80px !important;
                margin-left: auto !important;
                margin-right: auto !important;
                background-color: transparent !important;
            }

            .grouped-option-item {
                display: flex !important;
                align-items: center !important;
                gap: 5px !important;
                font-size: 10px !important;
                width: 100% !important;
                justify-content: space-between !important;
            }

            .option-label {
                font-weight: normal !important;
                white-space: nowrap !important;
                font-size: 9px !important;
            }

            .option-value {
                border-bottom: 1px solid #999 !important;
                min-width: 30px !important;
                min-height: 12px !important;
                padding: 1px 2px !important;
                font-size: 9px !important;
                flex-shrink: 0 !important;
                color: #000 !important;
            }

            /* Hide empty fields for print */
            .print-hide-empty {
                display: none !important;
            }

            /* Print optimization for custom page layout - 421px √ó 595px at 72 DPI */
            @page {
                margin: 29px;
                size: 421px 595px;
            }

            /* Live Print Preview specific optimizations */
            .preview-paper {
                width: 421px !important;
                height: 595px !important;
                background: white;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                margin: 20px auto;
                padding: 10px;
                box-sizing: border-box;
                overflow: hidden;
            }

            /* Responsive scaling for preview - adjusted for custom size */
            @media screen and (max-width: 1200px) {
                .preview-paper {
                    transform: scale(0.8);
                    transform-origin: top center;
                }
            }

            @media screen and (max-width: 768px) {
                .preview-paper {
                    transform: scale(0.6);
                    transform-origin: top center;
                }
            }

            /* Custom page-specific optimizations for 421x595px */
            .shop-info {
                text-align: center !important;
                flex: 1 !important;
                margin: 0 15px !important;
            }

            .shop-info h2 {
                margin: 0 !important;
                font-size: 18px !important;
                font-weight: bold !important;
                color: #000 !important;
                letter-spacing: 0.5px !important;
            }

            .shop-info p {
                margin: 5px 0 0 !important;
                font-size: 12px !important;
                font-style: italic !important;
                color: #333 !important;
            }

            /* Compact customer info grid for custom size */
            .customer-info {
                margin-bottom: 15px !important;
            }

            .info-row {
                display: flex !important;
                flex-wrap: wrap !important;
                margin-bottom: 8px !important;
            }

            .info-item {
                flex: 1 !important;
                min-width: 120px !important;
                margin-right: 10px !important;
                margin-bottom: 5px !important;
            }

            .info-label {
                font-weight: bold !important;
                font-size: 8px !important;
                margin-bottom: 1px !important;
                display: block !important;
                color: #000 !important;
            }

            .info-value {
                border-bottom: 1px solid #666 !important;
                min-height: 12px !important;
                padding-bottom: 1px !important;
                font-size: 8px !important;
                color: #000 !important;
                width: fit-content !important;
                max-width: 100px !important;
                min-width: 60px !important;
            }

            /* Compact cutting section */
            .cutting-section {
                display: flex !important;
                flex-wrap: wrap !important;
                align-items: center !important;
                gap: 10px !important;
                margin: 8px 0 !important;
                padding: 5px !important;
                border: 1px solid #666 !important;
                background-color: #f9f9f9 !important;
            }

            .cutting-item {
                display: flex !important;
                align-items: baseline !important;
                gap: 3px !important;
            }

            .cutting-item label {
                font-weight: bold !important;
                font-size: 8px !important;
                color: #000 !important;
                white-space: nowrap !important;
            }

            .cutting-value {
                border-bottom: 1px solid #666 !important;
                min-height: 10px !important;
                font-size: 8px !important;
                color: #000 !important;
                width: fit-content !important;
                max-width: 60px !important;
                min-width: 40px !important;
                padding: 1px 2px !important;
            }

            /* Compact measurement sections */
            .measurement-content {
                margin-bottom: 10px !important;
            }

            .measurement-section {
                margin-bottom: 10px !important;
            }

            .section-header {
                font-size: 12px !important;
                font-weight: bold !important;
                margin-bottom: 8px !important;
                text-align: center !important;
                color: #000 !important;
            }

            /* Ensure no content overflow */
            * {
                box-sizing: border-box !important;
            }
        }

        /* Print-specific styles for the standalone print form */
        body {
            margin: 0;
            padding: 20px;
            font-size: 12px;
            line-height: 1.3;
            width: 794px;
            background: white;
            color: #000;
        }

        /* Container styles */
        .container {
            max-width: none;
            width: 100%;
            margin: 0;
            padding: 0;
        }

        /* Print button styling */
        .print-controls {
            position: fixed;
            top: 10px;
            right: 10px;
            z-index: 1000;
            background: white;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .print-btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }

        .print-btn:hover {
            background: #0056b3;
        }

        /* Auto print when page loads */
        @media print {
            @page {
                margin: 29px;
                size: 421px 595px;
                /* Custom size: 421px width √ó 595px height at 72 DPI */
            }

            body {
                margin: 0;
                padding: 0;
            }

            .print-controls {
                display: none !important;
            }

            /* Hide measurement fields marked as empty or "NO" during print */
            .print-hide-empty {
                display: none !important;
            }
        }
    </style>
</head>

<body>
    <!-- Print Controls -->
    <div class="print-controls no-print">
        <button class="print-btn" onclick="window.print()">üñ®Ô∏è Print</button>
    </div> <!-- Print Form Layout -->
    <div class="print-form">
        <!-- Print Header with Logos -->
        <div class="print-header">
            <img src="../assets/img/logo-pic.png" alt="Noor & Sons Logo" class="logo-left">
            <div class="shop-info">
                <h2>Noor & Sons Tailors And Fabrics</h2>
                <p>We offer you stitching of your choice</p>
            </div>
            <div class="logo-right-container">
                <img src="../assets/img/coat_logo-pic.png" alt="Coat Logo" class="logo-right">
                <img src="../assets/img/Needle-logo.jpg" alt="Needle Logo" class="logo-right-bottom">
            </div>
        </div>

        <!-- Customer Info Section -->
        <div class="customer-info">
            <div class="info-row">
                <div class="info-item">
                    <label class="info-label">Code Number</label>
                    <div class="info-value" id="print-code-number"></div>
                </div>
                <div class="info-item">
                    <label class="info-label">Order Date</label>
                    <div class="info-value" id="print-order-date"></div>
                </div>
                <div class="info-item">
                    <label class="info-label">Return Date</label>
                    <div class="info-value" id="print-return-date"></div>
                </div>
            </div>

            <div class="info-row">
                <div class="info-item">
                    <label class="info-label">Name</label>
                    <div class="info-value" id="print-name"></div>
                </div>
                <div class="info-item">
                    <label class="info-label">Age</label>
                    <div class="info-value" id="print-age"></div>
                </div>
                <div class="info-item">
                    <label class="info-label">Cell Number</label>
                    <div class="info-value" id="print-cell-number"></div>
                </div>
            </div>

            <div class="info-row">
                <div class="info-item grid-span-3">
                    <label class="info-label">Address</label>
                    <div class="info-value" id="print-address"></div>
                </div>
            </div>
        </div> <!-- Cutting Section -->
        <div class="cutting-section">
            <div class="cutting-item">
                <label>Cutting No:</label>
                <div class="cutting-value" id="print-cutting-no"></div>
            </div>
            <div class="cutting-item">
                <label>Quantity:</label>
                <div class="cutting-value" id="print-quantity"></div>
            </div>
            <div class="cutting-item">
                <label>Enter by <span id="print-entered-by">Abubakkar</span></label>
            </div>
            <div class="garment-type">ÿ¥ŸÑŸàÿßÿ± ŸÇŸÖ€åÿµ</div>
        </div> <!-- Qameez Section -->
        <div class="measurement-section" id="print-qameez-section">
            <div class="section-title">ŸÇŸÖ€åÿµ</div>
            <div class="qameez-two-column-grid">
                <!-- Column 1 -->
                <div class="qameez-column-1">
                    <div class="qameez-measure-item">
                        <span class="qameez-label">ŸÑŸÖÿ®ÿßÿ¶€å</span>
                        <span class="qameez-value" id="qameez-lambai"></span>
                        <span class="qameez-style" id="qameez-daman-style"></span>
                    </div>
                    <div class="qameez-measure-item">
                        <span class="qameez-label">ÿ¢ÿ≥ÿ™€åŸÜ</span>
                        <span class="qameez-value" id="qameez-asteen"></span>
                        <span class="qameez-style" id="qameez-sleeve-style"></span>
                    </div>
                    <div class="qameez-measure-item">
                        <span class="qameez-label">ÿ™€åÿ±ÿß</span>
                        <span class="qameez-value" id="qameez-tera"></span>
                    </div>
                    <div class="qameez-measure-item">
                        <span class="qameez-label">ÿ®€åŸÜ / ⁄©ÿßŸÑÿ±</span>
                        <span class="qameez-collar-combined" id="qameez-collar-combined"></span>
                    </div>
                    <div class="qameez-measure-item">
                        <span class="qameez-label">⁄Ü⁄æÿßÿ™€å</span>
                        <span class="qameez-value" id="qameez-chati"></span>
                    </div>
                    <div class="qameez-measure-item">
                        <span class="qameez-label">⁄©ŸÖÿ±</span>
                        <span class="qameez-value" id="qameez-kamar"></span>
                    </div>
                    <div class="qameez-measure-item">
                        <span class="qameez-label">⁄Ø€åÿ±€Å</span>
                        <span class="qameez-value" id="qameez-gira"></span>
                    </div>
                    <div class="qameez-measure-item">
                        <span class="qameez-label">ŸÖŸà⁄ë€Å</span>
                        <span class="qameez-value" id="qameez-moza"></span>
                    </div>
                    <div class="qameez-measure-item">
                        <span class="qameez-label">ÿ¥ŸàŸÑ⁄àÿ±</span>
                        <span class="qameez-value" id="qameez-shoulder"></span>
                    </div>
                </div> <!-- Column 2 -->
                <div class="qameez-column-2">
                    <div class="qameez-measure-item">
                        <span class="qameez-label">Ÿæÿß⁄©Ÿπ</span>
                        <span class="qameez-value" id="qameez-pocket-type"></span>
                    </div>
                    <div class="qameez-measure-item">
                        <span class="qameez-label">ŸÅÿ±ŸÜŸπ Ÿæÿß⁄©Ÿπ</span>
                        <span class="qameez-style" id="qameez-front-pocket-style"></span>
                        <span class="qameez-value" id="qameez-front-pocket-size"></span>
                    </div>
                    <div class="qameez-measure-item">
                        <span class="qameez-label" id="qameez-cuff-plate-label">ŸæŸÑ€åŸπ ŸàÿßŸÑÿß ⁄©ŸÅ</span>
                        <span class="qameez-style" id="qameez-cuff-style"></span>
                    </div>
                    <div class="qameez-measure-item">
                        <span class="qameez-label">⁄©ŸÅ ⁄©ÿßÿ¨</span>
                        <span class="qameez-value" id="qameez-cuff-kaj"></span>
                    </div>
                    <div class="qameez-measure-item">
                        <span class="qameez-label">⁄Ü⁄© ŸæŸπ€å</span>
                        <span class="qameez-value" id="qameez-chak-patti"></span>
                    </div>
                    <div class="qameez-measure-item">
                        <span class="qameez-label">⁄Ü⁄© ŸæŸπ€å ⁄©ÿßÿ¨</span>
                        <span class="qameez-value" id="qameez-chak-patti-kaj"></span>
                    </div>
                    <div class="qameez-measure-item">
                        <span class="qameez-label">ŸæŸπ€å</span>
                        <span class="qameez-value" id="qameez-patti"></span>
                    </div>
                    <div class="qameez-measure-item">
                        <span class="qameez-label">ŸæŸπ€å ⁄ÜŸà⁄ëÿßÿ¶€å</span>
                        <span class="qameez-value" id="qameez-patti-churai"></span>
                    </div>
                </div>
            </div>

            <!-- Grouped Options Section -->
            <div class="qameez-grouped-options">
                <div class="grouped-option-item">
                    <span class="option-label">ÿπÿßŸÖ ÿ±ŸÜ⁄Ø ÿ®ŸπŸÜ</span>
                    <span class="option-value" id="qameez-button-color-grouped"></span>
                </div>
                <div class="grouped-option-item">
                    <span class="option-label">ÿ®ŸπŸÜ</span>
                    <span class="option-value" id="qameez-button-size-grouped"></span>
                </div>
                <div class="grouped-option-item">
                    <span class="option-label">ÿ≥ÿßÿØ€Å ÿ≥ŸÑÿßÿ¶€å</span>
                    <span class="option-value" id="qameez-silai-grouped"></span>
                </div>
            </div>
        </div>

        <!-- Separator Line -->
        <div class="separator"></div> <!-- Shalwar Section -->
        <div class="measurement-section" id="print-shalwar-section">
            <div class="shalwar-two-column-grid">
                <!-- Column 1 -->
                <div class="shalwar-column-1">
                    <div class="shalwar-measure-item">
                        <span class="shalwar-label">ÿ¥ŸÑŸàÿßÿ± ŸÑŸÖÿ®ÿßÿ¶€å</span>
                        <span class="shalwar-value" id="shalwar-lambai"></span>
                    </div>
                    <div class="shalwar-measure-item">
                        <span class="shalwar-label">ŸæÿßŸÜ⁄Ü€Å</span>
                        <span class="shalwar-value" id="shalwar-pacha"></span>
                    </div>
                    <div class="shalwar-measure-item">
                        <span class="shalwar-label">€ÅŸæ</span>
                        <span class="shalwar-value" id="shalwar-hip"></span>
                    </div>
                </div>

                <!-- Column 2 -->
                <div class="shalwar-column-2">
                    <div class="shalwar-measure-item">
                        <span class="shalwar-label">ÿßŸÜÿ≥ÿß€å⁄à</span>
                        <span class="shalwar-value" id="shalwar-ander"></span>
                    </div>
                    <div class="shalwar-measure-item">
                        <span class="shalwar-label">ÿ¥ŸÑŸàÿßÿ± Ÿæÿß⁄©Ÿπ</span>
                        <span class="shalwar-value" id="shalwar-pocket"></span>
                    </div>
                    <div class="shalwar-measure-item">
                        <span class="shalwar-label">ÿ¥ŸÑŸàÿßÿ± ŸÇÿ≥ŸÖ</span>
                        <span class="shalwar-value" id="shalwar-type"></span>
                    </div>
                </div>
            </div>
        </div><!-- Extra Demand Section -->
        <div class="extra-demand" id="print-extra-demand-section">
            <div class="extra-demand-label">ÿß€å⁄©ÿ≥Ÿπÿ±ÿß ⁄à€åŸÖÿßŸÜ⁄à</div>
            <div class="extra-demand-value" id="print-extra-demand"></div>
        </div>
    </div>

    <!-- Print Controls (hidden during printing) -->
    <div class="print-controls" id="print-controls">
        <button onclick="manualPrint()" class="btn-print">üñ®Ô∏è Print Again</button>
        <button onclick="window.close()" class="btn-close">‚úñ Close</button>
    </div>
    <script>
        // Print form functionality with comprehensive error handling
        function loadCustomerDataFromURL() {
            try {
                const urlParams = new URLSearchParams(window.location.search);
                const customerId = urlParams.get('id');

                if (customerId) {
                    const customers = JSON.parse(localStorage.getItem('customers') || '[]');
                    const customer = customers.find(c => (c.id || c._id) === customerId);

                    if (customer) {
                        populatePrintForm(customer);
                        // Auto print after a delay to ensure everything loads
                        setTimeout(() => {
                            window.print();
                        }, 1000);
                    } else {
                        console.error('Customer not found with ID:', customerId);
                        alert('Customer data not found. Please check the customer ID.');
                    }
                } else {
                    console.error('No customer ID provided in URL');
                    alert('No customer ID provided in URL.');
                }
            } catch (error) {
                console.error('Error loading customer data:', error);
                alert('Error loading customer data: ' + error.message);
            }
        }

        function populatePrintForm(customer) {
            try {
                // Helper function to format date
                const formatPrintDate = (dateStr) => {
                    if (!dateStr) return '';
                    try {
                        const date = new Date(dateStr);
                        return date.toLocaleDateString();
                    } catch (e) {
                        return dateStr;
                    }
                };

                // Helper function to check if a field has a value
                const hasValue = (value) => {
                    return value && value.toString().trim() !== '';
                };

                // Helper function to safely set text content
                const safeSetTextContent = (id, value) => {
                    const element = document.getElementById(id);
                    if (element) {
                        element.textContent = value || '';
                    } else {
                        console.warn(`Element with ID '${id}' not found in print form`);
                    }
                };

                // Populate customer info with error handling
                safeSetTextContent('print-code-number', customer.codeNumber);
                safeSetTextContent('print-order-date', formatPrintDate(customer.orderDate));
                safeSetTextContent('print-return-date', formatPrintDate(customer.returnDate));
                safeSetTextContent('print-name', customer.name);
                safeSetTextContent('print-age', customer.age);
                safeSetTextContent('print-cell-number', customer.cellNumber);
                safeSetTextContent('print-address', customer.address);
                safeSetTextContent('print-cutting-no', customer.cuttingNo);
                safeSetTextContent('print-quantity', customer.quantity);
                safeSetTextContent('print-entered-by', customer.enteredBy || 'Abubakkar');

                // Define measurements including collar_measurement
                const qameezMeasurements = [
                    { field: 'lambai', label: 'ŸÑŸÖÿ®ÿßÿ¶€å' },
                    { field: 'asteen', label: 'ÿ¢ÿ≥ÿ™€åŸÜ' },
                    { field: 'tera', label: 'ÿ™€åÿ±ÿß' },
                    { field: 'collar_measurement', label: 'ÿ®€åŸÜ / ⁄©ÿßŸÑÿ± ŸÖÿßŸæ' },
                    { field: 'chati', label: '⁄Ü⁄æÿßÿ™€å' },
                    { field: 'kamar', label: '⁄©ŸÖÿ±' },
                    { field: 'gira', label: '⁄Ø€åÿ±€Å' },
                    { field: 'moza', label: 'ŸÖŸà⁄ë€Å' },
                    { field: 'gol_asteen', label: '⁄ØŸàŸÑ ÿ¢ÿ≥ÿ™€åŸÜ' },
                    { field: 'collar_type', label: '⁄©ÿßŸÑÿ± Ÿπÿßÿ¶Ÿæ' },
                    { field: 'collar_style', label: '⁄©ÿßŸÑÿ± ÿßÿ≥Ÿπÿßÿ¶ŸÑ' },
                    { field: 'front_pocket_size', label: 'ŸÅÿ±ŸÜŸπ Ÿæÿß⁄©Ÿπ ÿ≥ÿßÿ¶ÿ≤' },
                    { field: 'double_side_pocket', label: '⁄àÿ®ŸÑ ÿ≥ÿßÿ¶€å⁄à Ÿæÿß⁄©Ÿπ' },
                    { field: 'single_pocket', label: 'ÿ≥ŸÜ⁄ØŸÑ Ÿæÿß⁄©Ÿπ' },
                    { field: 'front_pocket', label: 'ŸÅÿ±ŸÜŸπ Ÿæÿß⁄©Ÿπ' },
                    { field: 'silai', label: 'ÿ≥ŸÑÿßÿ¶€å' },
                    { field: 'button_color', label: 'ÿ®ŸπŸÜ ⁄©ÿß ÿ±ŸÜ⁄Ø' },
                    { field: 'button', label: 'ÿ®ŸπŸÜ' },
                    { field: 'button_size', label: 'ÿ®ŸπŸÜ ÿ≥ÿßÿ¶ÿ≤' },
                    { field: 'cuff_plate', label: '⁄©ŸÅ ŸæŸÑ€åŸπ' },
                    { field: 'cuff_style', label: '⁄©ŸÅ ÿßÿ≥Ÿπÿßÿ¶ŸÑ' },
                    { field: 'cuff_kaj', label: '⁄©ŸÅ ⁄©ÿßÿ¨' }, { field: 'chak_patti', label: '⁄Ü⁄© ŸæŸπ€å' },
                    { field: 'chak_patti_kaj', label: '⁄Ü⁄© ŸæŸπ€å ⁄©ÿßÿ¨' },
                    { field: 'daman', label: 'ÿØÿßŸÖŸÜ' },
                    { field: 'shoulder', label: 'ÿ¥ŸàŸÑ⁄àÿ±' },
                    { field: 'shoulder_style', label: 'ÿ¥ŸàŸÑ⁄àÿ± ÿßÿ≥Ÿπÿßÿ¶ŸÑ' },
                    { field: 'sleeve_type', label: 'ÿ¢ÿ≥ÿ™€åŸÜ ⁄©€å ŸÇÿ≥ŸÖ' },
                    { field: 'patti', label: 'ŸæŸπ€å' },
                    { field: 'patti_churai', label: 'ŸæŸπ€å ⁄ÜŸà⁄ëÿßÿ¶€å' }
                ];

                const shalwarMeasurements = [{ field: 'shalwar_lambai', label: 'ÿ¥ŸÑŸàÿßÿ± ŸÑŸÖÿ®ÿßÿ¶€å' },
                { field: 'pacha', label: 'ŸæÿßŸÜ⁄Ü€Å' },
                { field: 'lib', label: '€ÅŸæ' },
                { field: 'ander', label: 'ÿßŸÜÿ≥ÿß€å⁄à' },
                { field: 'shalwar_pocket', label: 'ÿ¥ŸÑŸàÿßÿ± Ÿæÿß⁄©Ÿπ' },
                { field: 'shalwar_type', label: 'ÿ¥ŸÑŸàÿßÿ± ŸÇÿ≥ŸÖ' }
                ];

                // Populate measurements
                const measurements = customer.measurements || {};                // Populate individual qameez fields in the two-column layout with error handling
                safeSetTextContent('qameez-lambai', measurements.lambai);
                safeSetTextContent('qameez-asteen', measurements.asteen);
                safeSetTextContent('qameez-tera', measurements.tera);

                // Populate combined collar field in the format: ⁄©ÿßŸÑÿ±ÿßŸÜ⁄ØŸÑÿ¥ 2 15 ÿ®€åŸÜ / ⁄©ÿßŸÑÿ±
                const collarParts = [];
                if (measurements.collar_type) collarParts.push(measurements.collar_type);
                if (measurements.collar_measurement) collarParts.push(measurements.collar_measurement);
                if (measurements.collar_ben_width_churai) collarParts.push(measurements.collar_ben_width_churai);
                if (collarParts.length > 0) collarParts.push('ÿ®€åŸÜ / ⁄©ÿßŸÑÿ±');
                safeSetTextContent('qameez-collar-combined', collarParts.join(' '));

                safeSetTextContent('qameez-chati', measurements.chati);
                safeSetTextContent('qameez-kamar', measurements.kamar);
                safeSetTextContent('qameez-gira', measurements.gira);
                safeSetTextContent('qameez-moza', measurements.moza);
                safeSetTextContent('qameez-shoulder', measurements.shoulder);

                // Populate style fields with error handling
                safeSetTextContent('qameez-daman-style', measurements.daman);
                safeSetTextContent('qameez-sleeve-style', measurements.sleeve_type);
                safeSetTextContent('qameez-collar-style', measurements.collar_style);
                safeSetTextContent('qameez-pocket-type', measurements.single_pocket || measurements.double_side_pocket);
                safeSetTextContent('qameez-front-pocket-style', measurements.front_pocket);
                safeSetTextContent('qameez-front-pocket-size', measurements.front_pocket_size); safeSetTextContent('qameez-silai', measurements.silai);
                safeSetTextContent('qameez-button-color', measurements.button_color);
                safeSetTextContent('qameez-button-size', measurements.button_size);                // Combine button type and button size for qameez-button field
                let buttonCombined = '';
                if (measurements.button && measurements.button !== '') {
                    if (measurements.button_size && measurements.button_size !== '') {
                        buttonCombined = measurements.button_size + ' ' + measurements.button;
                    } else {
                        buttonCombined = measurements.button;
                    }
                } else if (measurements.button_size && measurements.button_size !== '') {
                    buttonCombined = measurements.button_size;
                }
                safeSetTextContent('qameez-button', buttonCombined);

                // Combine cuff style and length with cuff plate prefix
                let cuffCombined = '';
                if (measurements.cuff_style) cuffCombined += measurements.cuff_style;
                if (measurements.cuff_length) cuffCombined += (cuffCombined ? ' ' : '') + measurements.cuff_length;

                // Add cuff plate prefix if available and not "NO"
                if (measurements.cuff_plate && measurements.cuff_plate !== 'NO' && measurements.cuff_plate !== '' && cuffCombined) {
                    cuffCombined = measurements.cuff_plate + ' ' + cuffCombined;
                }

                safeSetTextContent('qameez-cuff-style', cuffCombined); safeSetTextContent('qameez-cuff-kaj', measurements.cuff_kaj); safeSetTextContent('qameez-chak-patti', measurements.chak_patti); safeSetTextContent('qameez-chak-patti-kaj', measurements.chak_patti_kaj);

                // Handle gum_patti prefix for patti field
                let pattiValue = measurements.patti;
                if (measurements.gum_patti === 'Yes' && pattiValue && pattiValue !== 'ŸæŸπ€å') {
                    pattiValue = '⁄ØŸÖ ' + pattiValue;
                }
                safeSetTextContent('qameez-patti', pattiValue);

                safeSetTextContent('qameez-patti-churai', measurements.patti_churai);                // Populate grouped options section
                safeSetTextContent('qameez-button-color-grouped', measurements.button_color);                // Combine button type and size for grouped section
                let buttonGroupedCombined = '';
                if (measurements.button && measurements.button !== '') {
                    if (measurements.button_size && measurements.button_size !== '') {
                        buttonGroupedCombined = measurements.button_size + ' ' + measurements.button;
                    } else {
                        buttonGroupedCombined = measurements.button;
                    }
                } else if (measurements.button_size && measurements.button_size !== '') {
                    buttonGroupedCombined = measurements.button_size;
                }
                safeSetTextContent('qameez-button-size-grouped', buttonGroupedCombined);

                safeSetTextContent('qameez-silai-grouped', measurements.silai);

                // Populate individual shalwar fields in the two-column layout with error handling
                safeSetTextContent('shalwar-lambai', measurements.shalwar_lambai);
                safeSetTextContent('shalwar-pacha', measurements.pacha);
                safeSetTextContent('shalwar-hip', measurements.lib);
                safeSetTextContent('shalwar-ander', measurements.ander);
                safeSetTextContent('shalwar-pocket', measurements.shalwar_pocket);
                safeSetTextContent('shalwar-type', measurements.shalwar_type);

                // Generate Qameez measurements HTML (for dynamic container if needed)
                // Note: We're now using static two-column layout, so this container might not exist
                const qameezContainer = document.getElementById('print-qameez-measurements');
                if (qameezContainer) {
                    qameezContainer.innerHTML = '';

                    qameezMeasurements.forEach(item => {
                        if (hasValue(measurements[item.field])) {
                            const measureItem = document.createElement('div');
                            measureItem.className = 'measure-item';
                            measureItem.innerHTML = `
                                <div class="measure-label">${item.label}</div>
                                <div class="measure-value">${measurements[item.field]}</div>
                            `;
                            qameezContainer.appendChild(measureItem);
                        }
                    });
                }

                // Hide sections if no measurements (with error handling)
                const qameezSection = document.getElementById('print-qameez-section');
                // Check if qameez has any data by looking at the main fields
                const hasQameezData = measurements.lambai || measurements.asteen || measurements.chati || measurements.collar_measurement;
                if (qameezSection) {
                    if (!hasQameezData && (!qameezContainer || qameezContainer.children.length === 0)) {
                        qameezSection.classList.add('hidden');
                    } else {
                        qameezSection.classList.remove('hidden');
                    }
                } const shalwarSection = document.getElementById('print-shalwar-section');
                // Check if shalwar has any data by looking at the main fields
                const hasShalwarData = measurements.shalwar_lambai || measurements.pacha || measurements.lib;
                if (shalwarSection) {
                    if (!hasShalwarData) {
                        shalwarSection.classList.add('hidden');
                    } else {
                        shalwarSection.classList.remove('hidden');
                    }
                }

                // Handle extra demand with error handling
                const extraDemandValue = measurements.extra_demand || '';
                safeSetTextContent('print-extra-demand', extraDemandValue);
                const extraDemandSection = document.getElementById('print-extra-demand-section');
                if (extraDemandSection) {
                    if (extraDemandValue) {
                        extraDemandSection.classList.remove('hidden');
                    } else {
                        extraDemandSection.classList.add('hidden');
                    }
                }

                // Hide measurement fields that are "NO" or empty for print
                hidePrintEmptyFields(measurements);

                // Adjust qameez container height to prevent separator overlap
                adjustQameezContainerHeight();
            } catch (error) {
                console.error('Error populating print form:', error);
                alert('Error loading print data: ' + error.message);
            }
        }        // Function to hide measurement fields that are "NO" or empty for print
        function hidePrintEmptyFields(measurements) {
            try {
                // Get all measurement items in qameez and shalwar sections
                const qameezItems = document.querySelectorAll('.qameez-measure-item');
                const shalwarItems = document.querySelectorAll('.shalwar-measure-item');
                const dynamicItems = document.querySelectorAll('.measure-item');
                const groupedItems = document.querySelectorAll('.grouped-option-item');
                // Process qameez measurement items
                qameezItems.forEach(item => {
                    const valueElement = item.querySelector('.qameez-value');
                    const styleElement = item.querySelector('.qameez-style');
                    const collarElement = item.querySelector('.qameez-collar-combined');

                    if (valueElement) {
                        const value = valueElement.textContent.trim();
                        const styleValue = styleElement ? styleElement.textContent.trim() : '';

                        // Hide if value is empty, "NO", or style is "NO"
                        if (!value || value.toLowerCase() === 'no' || styleValue.toLowerCase() === 'no') {
                            item.classList.add('print-hide-empty');
                        } else {
                            item.classList.remove('print-hide-empty');
                        }
                    } else if (collarElement) {
                        const value = collarElement.textContent.trim();

                        // Hide if collar combined value is empty, just "ÿ®€åŸÜ / ⁄©ÿßŸÑÿ±" or "NO"
                        if (!value || value === 'ÿ®€åŸÜ / ⁄©ÿßŸÑÿ±' || value.toLowerCase() === 'no') {
                            item.classList.add('print-hide-empty');
                        } else {
                            item.classList.remove('print-hide-empty');
                        }
                    }
                });

                // Process shalwar measurement items (static layout)
                shalwarItems.forEach(item => {
                    const valueElement = item.querySelector('.shalwar-value');

                    if (valueElement) {
                        const value = valueElement.textContent.trim();

                        // Hide if value is empty or "NO"
                        if (!value || value.toLowerCase() === 'no') {
                            item.classList.add('print-hide-empty');
                        } else {
                            item.classList.remove('print-hide-empty');
                        }
                    }
                });

                // Process dynamic measurement items (if any)
                dynamicItems.forEach(item => {
                    const valueElement = item.querySelector('.measure-value');

                    if (valueElement) {
                        const value = valueElement.textContent.trim();

                        // Hide if value is empty or "NO"
                        if (!value || value.toLowerCase() === 'no') {
                            item.classList.add('print-hide-empty');
                        } else {
                            item.classList.remove('print-hide-empty');
                        }
                    }
                });

                // Process grouped option items
                groupedItems.forEach(item => {
                    const valueElement = item.querySelector('.option-value');

                    if (valueElement) {
                        const value = valueElement.textContent.trim();

                        // Hide if value is empty or "NO"
                        if (!value || value.toLowerCase() === 'no') {
                            item.classList.add('print-hide-empty');
                        } else {
                            item.classList.remove('print-hide-empty');
                        }
                    }
                });

                console.log('Applied print hide rules to measurement fields');
                console.log('Qameez items processed:', qameezItems.length);
                console.log('Shalwar items processed:', shalwarItems.length);
                console.log('Dynamic items processed:', dynamicItems.length);
                console.log('Grouped items processed:', groupedItems.length);
            } catch (error) {
                console.error('Error hiding empty print fields:', error);
            }
        }

        // Function to adjust qameez container height to prevent separator overlap
        function adjustQameezContainerHeight() {
            try {
                const container = document.querySelector('.qameez-two-column-grid');
                const column1 = document.querySelector('.qameez-column-1');
                const column2 = document.querySelector('.qameez-column-2');

                if (container && column1 && column2) {
                    // Get the actual height of both columns
                    const column1Height = column1.offsetHeight;
                    const column2Height = column2.offsetHeight;

                    // Set container height to the taller column plus some padding
                    const maxHeight = Math.max(column1Height, column2Height);
                    container.style.minHeight = (maxHeight + 20) + 'px';

                    console.log('Adjusted qameez container height:', maxHeight + 20, 'px');
                    console.log('Column 1 height:', column1Height, 'px');
                    console.log('Column 2 height:', column2Height, 'px');
                }
            } catch (error) {
                console.error('Error adjusting qameez container height:', error);
            }
        }

        // Manual print function for backup
        function manualPrint() {
            try {
                window.print();
            } catch (error) {
                console.error('Print error:', error);
                alert('Print failed: ' + error.message);
            }
        }

        // Load customer data when page loads
        window.addEventListener('load', loadCustomerDataFromURL);
    </script>
</body>

</html>